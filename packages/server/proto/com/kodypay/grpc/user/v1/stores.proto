syntax = "proto3";
package com.kodypay.grpc.user.v1;

import "com/kodypay/grpc/common/singularity.proto";
import "options/team.proto";

option java_multiple_files = true;
option java_outer_classname = "UserStoresProto";
option java_package = "com.kodypay.grpc.user.v1";

service KpUserStoresService {
  option (options.team) = BACKEND;

  rpc GetUserStores(GetUserStoresRequest) returns (GetUserStoresResponse);
}

message GetUserStoresRequest {
  string scope = 1; //This is the subject of interest as included in cognito permission claim
}

message GetUserStoresResponse {
  repeated MerchantStore stores = 1;
}

message MerchantStore {
  string storeId = 1;
  string storeName = 2;
  string currency_code = 3; // ISO 4217 (eg. GBP)
  string country_code = 4; // ISO 3166-1 Alpha-2 (eg. GB)
  string timezone_id = 5; // IANA timezone (eg. Europe/London)

  optional bool is_expiry_editable = 6;// PBL default configurations
  optional int32 expiry_days = 7;
  common.Singularity payment_link_type = 8;
  int32 failed_payment_threshold = 9;
  bool is_pay_by_bank_enabled = 10;
  optional string pay_by_bank_minimum_amount_threshold = 11;
}
