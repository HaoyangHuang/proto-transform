syntax = "proto3";

package com.kodypay.grpc.storedetails;

import "com/kodypay/grpc/common/time.proto";
import "options/team.proto";

option java_package = "com.kodypay.grpc.storedetails";
option java_multiple_files = true;
option java_outer_classname = "KpStoreDetails";

service StoreDetailsService {
  option (options.team) = BACKEND;

  rpc saveStoreDetails(SaveStoreDetailsRequest) returns (SaveStoreDetailsResponse);
  rpc updateStoreDetails(UpdateStoreDetailsRequest) returns (UpdateStoreDetailsResponse);
  rpc getStoreDetails(GetStoreDetailsRequest) returns (GetStoreDetailsResponse);
}

message SaveStoreDetailsResponse {
  StoreDetails store_details = 1;
}

message UpdateStoreDetailsResponse {
  StoreDetails store_details = 1;
}

message GetStoreDetailsResponse {
  StoreDetails store_details = 1;
}

message GetStoreDetailsRequest {
    string store_id = 1;
}

message UpdateStoreDetailsRequest {
  string store_id = 1;
  optional string name = 2;
  optional string acquiring_account_id = 3;
  optional string settlement_account_id = 4;
  optional common.Time closing_time = 5;
  repeated string languages = 6; // empty means don't change
  optional string default_language = 7;
  optional string adyen_ipp_merchant_account = 8;
  optional string adyen_ecom_merchant_account = 9;
  optional string adyen_ipp_store_id = 10;
  optional SettlementAccountType settlement_account_type = 11;
  optional string adyen_ecom_store_id = 12;
  oneof ccc_currencies {
    OrderedCurrencies ccc_currencies_value = 13;
    NoChange ccc_currencies_no_change = 14;
  }
  message NoChange {}
}

message OrderedCurrencies {
  repeated OrderedCurrency currencies = 1;
}

message OrderedCurrency {
  int32 order = 1;
  string currency_code = 2;
}

enum SettlementAccountType {
  BalanceAccount = 0;
  TransferInstrument = 1;
}

message SaveStoreDetailsRequest {
  string store_id = 1;
  string name = 2;
  optional string acquiring_account_id = 3;
  optional string settlement_account_id = 4;
  string organisation_id = 5;
  string timezone_id = 6;
  common.Time closing_time = 7;
  string currency_code = 8;
  repeated string languages = 9;
  string default_language = 10;
  string country_code = 11;
  optional string adyen_ipp_merchant_account = 12;
  optional string adyen_ecom_merchant_account = 13;
  optional string adyen_ipp_store_id = 14;
  optional SettlementAccountType settlement_account_type = 15;
  optional string adyen_ecom_store_id = 16;
  OrderedCurrencies ccc_currencies = 17;
}

message StoreDetails {
  string store_id = 1;
  string name = 2;
  optional string acquiring_account_id = 3;
  optional string settlement_account_id = 4;
  string organisation_id = 5;
  string timezone_id = 6; // IANA timezone (eg. Europe/London)
  common.Time closing_time = 7;
  string currency_code = 8; // ISO 4217 (eg. GBP)
  repeated string languages = 9;
  string default_language = 10; // ISO 639-1 (eg. en)
  string country_code = 11; // ISO 3166-1 Alpha-2 (eg. GB)
  optional string adyen_ipp_merchant_account = 12;
  optional string adyen_ecom_merchant_account = 13;
  optional string adyen_ipp_store_id = 14;
  optional SettlementAccountType settlement_account_type = 15;
  optional string adyen_ecom_store_id = 16;
  OrderedCurrencies ccc_currencies = 17;
}
